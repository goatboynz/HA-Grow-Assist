# =============================================================================
# JOURNAL CARD - Simple Version
# =============================================================================
# Add journal entries using quick buttons - no helpers needed!
#
# For custom notes, use Developer Tools > Services:
#   service: grow_room_manager.add_journal_entry
#   data:
#     room_id: f1
#     note: "Your custom note here"
#
# =============================================================================

type: vertical-stack
cards:
  - type: custom:mushroom-title-card
    title: "ðŸ“ Grow Journal"
    subtitle: "Quick notes and observations"

  # Entry counts per room
  - type: glance
    title: "Journal Entries"
    entities:
      - entity: sensor.flower_room_1_journal_entries
        name: "F1"
      - entity: sensor.flower_room_2_journal_entries
        name: "F2"
      - entity: sensor.flower_room_3_journal_entries
        name: "F3"
      - entity: sensor.veg_room_journal_entries
        name: "Veg"

  # F1 Quick Notes
  - type: custom:mushroom-title-card
    title: ""
    subtitle: "ðŸŒ¸ Flower Room 1"

  - type: horizontal-stack
    cards:
      - type: button
        name: "âœ… All Good"
        icon: mdi:check-circle
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "Quick check - all plants looking healthy"
      - type: button
        name: "ðŸ’§ Fed"
        icon: mdi:water
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "Watered/fed plants - nutrients mixed fresh"
      - type: button
        name: "ðŸ› IPM"
        icon: mdi:bug
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "IPM spray application completed"

  - type: horizontal-stack
    cards:
      - type: button
        name: "âœ‚ï¸ Pruned"
        icon: mdi:content-cut
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "Defoliation/pruning completed"
      - type: button
        name: "ðŸ“Š EC Check"
        icon: mdi:test-tube
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "EC/pH levels checked and adjusted"
      - type: button
        name: "âš ï¸ Issue"
        icon: mdi:alert
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: f1
            note: "Issue found - needs attention (add details via service call)"

  # Veg Room Quick Notes
  - type: custom:mushroom-title-card
    title: ""
    subtitle: "ðŸŒ± Veg Room"

  - type: horizontal-stack
    cards:
      - type: button
        name: "âœ… All Good"
        icon: mdi:check-circle
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "Quick check - all plants looking healthy"
      - type: button
        name: "ðŸ’§ Fed"
        icon: mdi:water
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "Watered/fed plants"
      - type: button
        name: "ðŸ› IPM"
        icon: mdi:bug
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "IPM spray application completed"

  - type: horizontal-stack
    cards:
      - type: button
        name: "ðŸŒ± Clones"
        icon: mdi:sprout
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "Checked clones - rooting progress noted"
      - type: button
        name: "âœ‚ï¸ Cuttings"
        icon: mdi:content-cut
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "Took cuttings from mother plants"
      - type: button
        name: "ðŸ“ˆ Stage Up"
        icon: mdi:arrow-up
        tap_action:
          action: call-service
          service: grow_room_manager.add_journal_entry
          data:
            room_id: veg
            note: "Plants moved to next growth stage"

  # Recent entries display
  - type: markdown
    content: |
      ---
      ### ðŸ“– Recent Entries
      
      **F1 Last Entry:** {{ state_attr('sensor.flower_room_1_journal_entries', 'last_entry_date') or 'None' }}
      > {{ state_attr('sensor.flower_room_1_journal_entries', 'last_entry_preview') or 'No entries' }}
      
      **Veg Last Entry:** {{ state_attr('sensor.veg_room_journal_entries', 'last_entry_date') or 'None' }}
      > {{ state_attr('sensor.veg_room_journal_entries', 'last_entry_preview') or 'No entries' }}

  # Export buttons
  - type: horizontal-stack
    cards:
      - type: button
        name: "ðŸ“¤ Export F1"
        icon: mdi:export
        tap_action:
          action: call-service
          service: grow_room_manager.export_journal
          data:
            room_id: f1
            format: csv
      - type: button
        name: "ðŸ“¤ Export Veg"
        icon: mdi:export
        tap_action:
          action: call-service
          service: grow_room_manager.export_journal
          data:
            room_id: veg
            format: csv
