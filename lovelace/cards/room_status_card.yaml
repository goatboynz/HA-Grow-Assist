# =============================================================================
# ROOM STATUS CARD
# =============================================================================
# Shows current day, phase, and targets for a single room
# 
# USAGE: Copy this card and replace "flower_room_1" with your room's sensor name
# =============================================================================

type: vertical-stack
cards:
  - type: markdown
    content: |
      # ðŸŒ¿ {{ state_attr('sensor.flower_room_1_grow_status', 'room_name') }}
      
      {% set status = states('sensor.flower_room_1_grow_status') %}
      {% set phase = state_attr('sensor.flower_room_1_grow_status', 'phase') %}
      {% set week = state_attr('sensor.flower_room_1_grow_status', 'current_week') %}
      {% set ec = state_attr('sensor.flower_room_1_grow_status', 'recommended_ec') %}
      {% set dryback = state_attr('sensor.flower_room_1_grow_status', 'target_dryback') %}
      {% set remaining = state_attr('sensor.flower_room_1_grow_status', 'days_remaining') %}
      {% set harvest = state_attr('sensor.flower_room_1_grow_status', 'harvest_window') %}
      
      {% if status != 'Not Started' %}
      ## {{ status }} | Week {{ week }}
      ### {{ phase }} Phase
      
      {% if harvest %}
      ## ðŸŽ‰ HARVEST WINDOW OPEN! ðŸŽ‰
      {% endif %}
      
      | Target | Value |
      |--------|-------|
      | **EC** | {{ ec }} |
      | **Dryback** | {{ dryback }} |
      | **Days to Harvest** | {{ remaining }} |
      {% else %}
      ## Not Started
      Set a start date to begin tracking.
      {% endif %}

  - type: gauge
    entity: sensor.flower_room_1_grow_progress
    name: "Cycle Progress"
    min: 0
    max: 100
    severity:
      green: 90
      yellow: 50
      red: 0
