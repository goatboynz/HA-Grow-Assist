# =============================================================================
# GROW ROOM MANAGER - Simple Dashboard
# =============================================================================
# 
# NO CONFIGURATION NEEDED! Just add rooms via:
# Settings > Devices & Services > Add Integration > Grow Room Manager
#
# =============================================================================

title: Grow Rooms
views:
  # ===========================================================================
  # OVERVIEW - All Rooms at a Glance
  # ===========================================================================
  - title: "Overview"
    path: overview
    icon: mdi:view-dashboard
    cards:
      - type: markdown
        content: |
          # ðŸŒ¿ Grow Room Manager
          
          **To add a room:** Settings â†’ Devices & Services â†’ Add Integration â†’ Grow Room Manager
          
          **To change start date:** Click Configure on the room's integration entry

      # Room Status Cards
      - type: horizontal-stack
        cards:
          - type: entity
            entity: sensor.flower_room_1_grow_status
            name: "F1"
          - type: entity
            entity: sensor.flower_room_2_grow_status
            name: "F2"
          - type: entity
            entity: sensor.flower_room_3_grow_status
            name: "F3"

      # Progress
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.flower_room_1_grow_progress
            name: "F1 Progress"
            min: 0
            max: 100
            severity:
              green: 80
              yellow: 50
              red: 0
          - type: gauge
            entity: sensor.flower_room_2_grow_progress
            name: "F2 Progress"
            min: 0
            max: 100
          - type: gauge
            entity: sensor.flower_room_3_grow_progress
            name: "F3 Progress"
            min: 0
            max: 100

  # ===========================================================================
  # ROOM F1
  # ===========================================================================
  - title: "F1"
    path: f1
    icon: mdi:numeric-1-circle
    cards:
      # Big Status Display
      - type: markdown
        content: |
          # ðŸŒ¿ Flower Room 1
          {% set status = states('sensor.flower_room_1_grow_status') %}
          {% set phase = state_attr('sensor.flower_room_1_grow_status', 'phase') %}
          {% set ec = state_attr('sensor.flower_room_1_grow_status', 'recommended_ec') %}
          {% set dryback = state_attr('sensor.flower_room_1_grow_status', 'target_dryback') %}
          
          ## {{ status }} {% if phase %}| {{ phase }} Phase{% endif %}
          
          {% if ec %}
          | Target | Value |
          |--------|-------|
          | **EC** | {{ ec }} |
          | **Dryback** | {{ dryback }} |
          {% endif %}

      # Next Task
      - type: entities
        title: "ðŸ“‹ Next Task"
        show_header_toggle: false
        entities:
          - entity: sensor.flower_room_1_next_task
            name: "Task"
          - type: attribute
            entity: sensor.flower_room_1_next_task
            attribute: days_until
            name: "Days Until"
            icon: mdi:clock-outline

      # Quick Actions
      - type: horizontal-stack
        cards:
          - type: button
            name: "Add Journal Note"
            icon: mdi:notebook-plus
            tap_action:
              action: call-service
              service: grow_room_manager.add_journal_entry
              service_data:
                room_id: "f1"
                note: "Quick note added"

      # Journal Count
      - type: entity
        entity: sensor.flower_room_1_journal_entries
        name: "Journal Entries"

  # ===========================================================================
  # ROOM F2
  # ===========================================================================
  - title: "F2"
    path: f2
    icon: mdi:numeric-2-circle
    cards:
      - type: markdown
        content: |
          # ðŸŒ¿ Flower Room 2
          {% set status = states('sensor.flower_room_2_grow_status') %}
          {% set phase = state_attr('sensor.flower_room_2_grow_status', 'phase') %}
          {% set ec = state_attr('sensor.flower_room_2_grow_status', 'recommended_ec') %}
          {% set dryback = state_attr('sensor.flower_room_2_grow_status', 'target_dryback') %}
          
          ## {{ status }} {% if phase %}| {{ phase }} Phase{% endif %}
          
          {% if ec %}
          | Target | Value |
          |--------|-------|
          | **EC** | {{ ec }} |
          | **Dryback** | {{ dryback }} |
          {% endif %}

      - type: entities
        title: "ðŸ“‹ Next Task"
        entities:
          - entity: sensor.flower_room_2_next_task
            name: "Task"
          - type: attribute
            entity: sensor.flower_room_2_next_task
            attribute: days_until
            name: "Days Until"

      - type: entity
        entity: sensor.flower_room_2_journal_entries
        name: "Journal Entries"

  # ===========================================================================
  # ROOM F3
  # ===========================================================================
  - title: "F3"
    path: f3
    icon: mdi:numeric-3-circle
    cards:
      - type: markdown
        content: |
          # ðŸŒ¿ Flower Room 3
          {% set status = states('sensor.flower_room_3_grow_status') %}
          {% set phase = state_attr('sensor.flower_room_3_grow_status', 'phase') %}
          {% set ec = state_attr('sensor.flower_room_3_grow_status', 'recommended_ec') %}
          {% set dryback = state_attr('sensor.flower_room_3_grow_status', 'target_dryback') %}
          
          ## {{ status }} {% if phase %}| {{ phase }} Phase{% endif %}
          
          {% if ec %}
          | Target | Value |
          |--------|-------|
          | **EC** | {{ ec }} |
          | **Dryback** | {{ dryback }} |
          {% endif %}

      - type: entities
        title: "ðŸ“‹ Next Task"
        entities:
          - entity: sensor.flower_room_3_next_task
            name: "Task"
          - type: attribute
            entity: sensor.flower_room_3_next_task
            attribute: days_until
            name: "Days Until"

      - type: entity
        entity: sensor.flower_room_3_journal_entries
        name: "Journal Entries"

  # ===========================================================================
  # QUICK REFERENCE
  # ===========================================================================
  - title: "ðŸ“– Guide"
    path: guide
    icon: mdi:book-open-variant
    cards:
      - type: markdown
        content: |
          # Athena Pro Line Quick Reference
          
          ## Phases
          
          | Phase | Days | EC | Dryback |
          |-------|------|-----|---------|
          | **Stretch** | 1-21 | 3.0 | 20-25% |
          | **Bulk** | 22-55 | 3.0 | 30-40% |
          | **Finish** | 56-84 | 1.5 | 40-50% |
          
          ## Critical Days
          
          - **Day 2**: Heavy defoliation
          - **Day 21**: Final defoliation + LAST IPM spray
          - **Day 42**: Major maintenance prune
          - **Day 56**: Switch to Athena Fade
          - **Day 77-84**: Harvest window
          
          ## Environmental Targets
          
          ### Stretch (Days 1-21)
          - Day: 78-82Â°F | Night: 68-72Â°F
          - Humidity: 55-65% | VPD: 1.0-1.2
          
          ### Bulk (Days 22-55)
          - Day: 78-82Â°F | Night: 65-70Â°F
          - Humidity: 50-60% | VPD: 1.2-1.4
          
          ### Finish (Days 56-84)
          - Day: 75-78Â°F | Night: 62-68Â°F
          - Humidity: 40-50% | VPD: 1.4-1.6
