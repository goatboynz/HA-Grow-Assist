# Grow Room Manager Dashboard
# ============================
# 
# BEFORE USING THIS DASHBOARD:
# 1. Install Grow Room Manager integration via HACS
# 2. Create these helpers in configuration.yaml or via UI:
#
#    input_datetime:
#      f1_start_date:
#        name: "F1 Start Date"
#        has_date: true
#        has_time: false
#
#    input_text:
#      f1_journal_note:
#        name: "F1 Journal Note"
#        max: 255
#
# 3. Create a Local Calendar: Settings > Devices > Add Integration > Local Calendar
# 4. Create Local To-do lists: Settings > Devices > Add Integration > Local To-do
# 5. Optionally add rooms via: Settings > Devices > Add Integration > Grow Room Manager
#
# CUSTOMIZE: Replace entity IDs below with your actual entities

title: Grow Room Manager
views:
  - title: F1 Room
    path: f1
    icon: mdi:numeric-1-circle
    cards:
      # Instructions Card
      - type: markdown
        title: "üåø Flower Room 1"
        content: |
          ## Quick Start
          1. Set the **Start Date** below (Day 1 of flower/flip day)
          2. Click **Generate Tasks** to create your 84-day schedule
          3. Tasks will appear in your calendar and todo list
          
          ---
          
          **Need to create helpers first?** Add these to configuration.yaml:
          ```yaml
          input_datetime:
            f1_start_date:
              name: "F1 Start Date"
              has_date: true
              has_time: false
          ```

      # Start Date Input
      - type: entities
        title: "üìÖ Cycle Settings"
        entities:
          - entity: input_datetime.f1_start_date
            name: Start Date (Day 1 of Flower)

      # Generate Tasks Button - Uses service directly with entity selectors
      - type: vertical-stack
        title: "‚ö° Actions"
        cards:
          - type: markdown
            content: |
              **Generate Tasks:** Creates 35 scheduled tasks in your calendar and todo list.
              
              You must specify your calendar and todo entities below:
          
          - type: horizontal-stack
            cards:
              - type: button
                name: Generate Tasks
                icon: mdi:calendar-plus
                icon_height: 40px
                tap_action:
                  action: call-service
                  service: grow_room_manager.generate_tasks
                  service_data:
                    room_id: "f1"
                    start_date: "{{ states('input_datetime.f1_start_date') }}"
                    calendar_entity: calendar.grow_calendar
                    todo_entity: todo.f1_tasks

      # Journal Entry
      - type: vertical-stack
        title: "üìù Journal"
        cards:
          - type: entities
            entities:
              - entity: input_text.f1_journal_note
                name: Note
          
          - type: button
            name: Save Journal Entry
            icon: mdi:content-save
            tap_action:
              action: call-service
              service: grow_room_manager.add_journal_entry
              service_data:
                room_id: "f1"
                note: "{{ states('input_text.f1_journal_note') }}"

  - title: Services
    path: services
    icon: mdi:cog
    cards:
      - type: markdown
        title: "üîß Available Services"
        content: |
          ## grow_room_manager.generate_tasks
          Generate 35 calendar events and todo items for an 84-day grow cycle.
          
          ```yaml
          service: grow_room_manager.generate_tasks
          data:
            room_id: "f1"
            start_date: "2024-12-01"
            calendar_entity: calendar.your_calendar
            todo_entity: todo.your_todo_list
          ```
          
          ---
          
          ## grow_room_manager.add_journal_entry
          Save a note (and optional camera snapshot) to the grow journal.
          
          ```yaml
          service: grow_room_manager.add_journal_entry
          data:
            room_id: "f1"
            note: "Plants looking healthy today"
            image_entity: camera.grow_room  # optional
          ```
          
          ---
          
          ## grow_room_manager.set_start_date
          Programmatically set the start date.
          
          ```yaml
          service: grow_room_manager.set_start_date
          data:
            room_id: "f1"
            start_date: "2024-12-01"
          ```
          
          ---
          
          ## grow_room_manager.export_journal
          Export journal to CSV or JSON file.
          
          ```yaml
          service: grow_room_manager.export_journal
          data:
            room_id: "f1"
            format: "csv"  # or "json"
          ```

      - type: markdown
        title: "üìã Required Helpers"
        content: |
          Add these to your `configuration.yaml`:
          
          ```yaml
          input_datetime:
            f1_start_date:
              name: "F1 Start Date"
              has_date: true
              has_time: false
            f2_start_date:
              name: "F2 Start Date"
              has_date: true
              has_time: false
          
          input_text:
            f1_journal_note:
              name: "F1 Journal Note"
              max: 255
            f2_journal_note:
              name: "F2 Journal Note"
              max: 255
          ```
          
          Then restart Home Assistant.

  - title: Calendar
    path: calendar
    icon: mdi:calendar
    cards:
      - type: calendar
        entities:
          - calendar.grow_calendar
        initial_view: listWeek
